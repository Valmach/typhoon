%%
%%   Copyright 2015 Zalando SE
%%
%%   Licensed under the Apache License, Version 2.0 (the "License");
%%   you may not use this file except in compliance with the License.
%%   You may obtain a copy of the License at
%%
%%       http://www.apache.org/licenses/LICENSE-2.0
%%
%%   Unless required by applicable law or agreed to in writing, software
%%   distributed under the License is distributed on an "AS IS" BASIS,
%%   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%%   See the License for the specific language governing permissions and
%%   limitations under the License.
%%
[

%%
%%
{lager, [
   {handlers, [
      {lager_console_backend, [error, {lager_default_formatter, [time, " [",severity,"] ", message, "\n"]}]}
     ,{lager_file_backend,    [{file, "log/access.log"}, {level, none}, {formatter, lager_default_formatter},{formatter_config, [date, " ", time, " ", message, "\n"]}]}
   ]},
   {traces, [
      {{lager_file_backend, "log/access.log"}, [{module, knet_udp}],  notice}
     ,{{lager_file_backend, "log/access.log"}, [{module, knet_tcp}],  notice}
     ,{{lager_file_backend, "log/access.log"}, [{module, knet_ssl}],  notice}
     ,{{lager_file_backend, "log/access.log"}, [{module, knet_http}], notice}
     ,{{lager_file_backend, "log/access.log"}, [{module, knet_ws}],   notice}
   ]}
]},

%%
%%
{ambit, [
   {name, typhoon}
  ,{ring, [
      {type, ring}
     ,{m,      64}
     ,{q,    4096}
     ,{n,       3}
     ,{hash,  sha}  
   ]},

   %%
   %% list of cluster seed nodes
   {seed,       ['a@127.0.0.1']}
]},

%%
%%
{typhoon, [
   {vardir, "/tmp/typhoon"}
]},

%%
%%
{restd, [
   {default, [
      {uri,  "http://*:8080"},
      {pool, 10},
      {mod,  [
         {"*://*/",                             restd_api_webapp, [{htdoc, zephyrus}]}
        ,{"*://*/:id",                          zephyrus_webapp,  [{htdoc, zephyrus}]}
        ,{"*://*/series/:id/:ticker/:from/:to", zephyrus_series}
        ,{"*://*/scenario/:id",                 zephyrus_scenario}
        ,{"*://*/run/:id",                      zephyrus_run}
      ]}
   ]}
]}

].